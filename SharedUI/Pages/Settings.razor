@page "/settings"

@inherits SharedUI.Mvvm.ViewModelComponentBase<SharedUI.ViewModels.SettingsViewModel>

@using SharedUI.Services.Settings

@inject AppSettingsService SettingsService
@inject NavigationManager Nav

<MudPaper Class="pa-4" Elevation="1">
    <MudStack Spacing="3">
        <MudStack Row="true" AlignItems="AlignItems.Center" Justify="Justify.SpaceBetween">
            <MudText Typo="Typo.h5">Settings</MudText>
            <MudButton Variant="Variant.Text" StartIcon="@Icons.Material.Filled.ArrowBack" OnClick="@(() => Vm!.GoBack())">Editor</MudButton>
        </MudStack>

        <MudDivider />

        <MudText Typo="Typo.subtitle1">Theme</MudText>
        <MudRadioGroup T="AppThemeMode" Value="@Vm!.Theme" ValueChanged="Vm!.OnThemeChanged">
            <MudRadio T="AppThemeMode" Value="AppThemeMode.System" Label="System" />
            <MudRadio T="AppThemeMode" Value="AppThemeMode.Light" Label="Light" />
            <MudRadio T="AppThemeMode" Value="AppThemeMode.Dark" Label="Dark" />
        </MudRadioGroup>

        <MudDivider />

        <MudText Typo="Typo.subtitle1">Touch</MudText>

        <MudText Typo="Typo.caption">Pinch min scale</MudText>
        <MudSlider T="double" Value="@Vm!.TouchMinScale" ValueChanged="Vm!.OnTouchMinScaleChanged" Min="0.01" Max="5.0" Step="0.01" Color="Color.Primary" />

        <MudText Typo="Typo.caption">Pinch max scale</MudText>
        <MudSlider T="double" Value="@Vm!.TouchMaxScale" ValueChanged="Vm!.OnTouchMaxScaleChanged" Min="0.1" Max="50.0" Step="0.1" Color="Color.Primary" />

        <MudText Typo="Typo.caption">Pinch sensitivity</MudText>
        <MudSlider T="double" Value="@Vm!.TouchPinchExponent" ValueChanged="Vm!.OnTouchPinchExponentChanged" Min="0.5" Max="2.0" Step="0.05" Color="Color.Primary" />

        <MudDivider />

        <MudSwitch T="bool" Value="@Vm!.TouchInertiaEnabled" ValueChanged="Vm!.OnTouchInertiaEnabledChanged" Color="Color.Primary">
            Inertia scroll
        </MudSwitch>

        <MudText Typo="Typo.caption">Inertia start speed (px/ms)</MudText>
        <MudSlider T="double" Value="@Vm!.TouchInertiaStartSpeed" ValueChanged="Vm!.OnTouchInertiaStartSpeedChanged" Min="0" Max="0.5" Step="0.01" Color="Color.Primary" Disabled="@(!Vm!.TouchInertiaEnabled)" />

        <MudText Typo="Typo.caption">Inertia stop speed (px/ms)</MudText>
        <MudSlider T="double" Value="@Vm!.TouchInertiaStopSpeed" ValueChanged="Vm!.OnTouchInertiaStopSpeedChanged" Min="0" Max="0.5" Step="0.005" Color="Color.Primary" Disabled="@(!Vm!.TouchInertiaEnabled)" />

        <MudText Typo="Typo.caption">Inertia decay per 16ms</MudText>
        <MudSlider T="double" Value="@Vm!.TouchInertiaDecayPer16ms" ValueChanged="Vm!.OnTouchInertiaDecayChanged" Min="0.80" Max="0.99" Step="0.005" Color="Color.Primary" Disabled="@(!Vm!.TouchInertiaEnabled)" />
    </MudStack>
</MudPaper>
