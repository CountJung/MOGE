@using MudBlazor

<MudPaper Class="pa-4" Elevation="1">
    <MudStack Spacing="2">
        <MudText Typo="Typo.h5">Editor</MudText>

        <MudStack Row="true" Spacing="2" AlignItems="AlignItems.Center">
            <MudTooltip Text="Open image">
                <MudIconButton Icon="@Icons.Material.Filled.FolderOpen" Color="Color.Primary"
                               OnClick="@(async () => await OpenImage.InvokeAsync())"
                               aria-label="Open image" />
            </MudTooltip>

            @if (HasImage)
            {
                <MudText Typo="Typo.body2">@FileName (@(FileSizeBytes / 1024) KB)</MudText>

                <MudTooltip Text="Save as PNG">
                    <MudIconButton Icon="@Icons.Material.Filled.Download" Color="Color.Inherit"
                                   OnClick="@(async () => await SavePng.InvokeAsync())"
                                   aria-label="Save as PNG" />
                </MudTooltip>

                <MudTooltip Text="Clear image">
                    <MudIconButton Icon="@Icons.Material.Filled.Delete" Color="Color.Error"
                                   OnClick="@(async () => await Clear.InvokeAsync())"
                                   aria-label="Clear image" />
                </MudTooltip>
            }
            else
            {
                <MudText Typo="Typo.body2">No image loaded</MudText>
            }
        </MudStack>

        <MudDivider />
        <MudText Typo="Typo.body2">Use the Properties panel (right side of the canvas) for filters and perspective.</MudText>
    </MudStack>
</MudPaper>

@code {
    [Parameter] public bool HasImage { get; set; }
    [Parameter] public string? FileName { get; set; }
    [Parameter] public long FileSizeBytes { get; set; }

    [Parameter] public EventCallback OpenImage { get; set; }
    [Parameter] public EventCallback SavePng { get; set; }
    [Parameter] public EventCallback Clear { get; set; }
}
